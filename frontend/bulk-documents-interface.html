<!-- Aba de Documentos Massivos -->
<div id="view-bulk-documents" class="hidden">
  <div class="page-header">
    <h2>📁 Gestão de Documentos em Massa</h2>
    <p>Sistema para upload e organização de grandes volumes de documentos de funcionários</p>
  </div>

  <div class="grid" style="grid-template-columns: 1fr 1fr; gap: 2rem;">
    <!-- Seção de Upload -->
    <div class="card">
      <h3>🚀 Upload em Lote</h3>
      <div class="form-section">
        <div class="form-group">
          <label>Selecionar Funcionário</label>
          <select id="bulk-employee-select" class="input">
            <option value="">Carregando funcionários...</option>
          </select>
        </div>
        
        <div class="form-group">
          <label>Tipo de Documento</label>
          <select id="bulk-doc-type" class="input">
            <option value="RG">RG</option>
            <option value="CPF">CPF</option>
            <option value="CONTRATO">Contrato</option>
            <option value="DIPLOMA">Diploma</option>
            <option value="CERTIFICADO">Certificado</option>
            <option value="PRONTUARIO">Prontuário</option>
            <option value="EXAME">Exame Médico</option>
            <option value="OUTROS">Outros</option>
          </select>
        </div>

        <div class="form-group">
          <label>Descrição Geral</label>
          <input id="bulk-description" class="input" placeholder="Descrição dos documentos">
        </div>

        <div class="form-group">
          <label>Data de Expiração (opcional)</label>
          <input id="bulk-expiry" class="input" type="date">
        </div>

        <div class="form-group">
          <label>Selecionar Arquivos (PDF, DOC, IMG)</label>
          <div class="file-drop-zone" id="bulk-drop-zone">
            <input id="bulk-file-input" type="file" multiple accept=".pdf,.doc,.docx,.jpg,.jpeg,.png,.txt,.xls,.xlsx" style="display: none;">
            <div class="drop-message">
              <div style="font-size: 3rem; margin-bottom: 1rem;">📄</div>
              <p><strong>Arraste arquivos aqui</strong> ou <button type="button" onclick="document.getElementById('bulk-file-input').click()" class="link-button">clique para selecionar</button></p>
              <p style="color: #666; font-size: 0.9rem;">Máximo: 100 arquivos por vez, 100MB por arquivo</p>
            </div>
            <div id="file-preview" class="file-preview hidden"></div>
          </div>
        </div>

        <div class="form-actions">
          <button id="bulk-upload-btn" class="btn ok" disabled>
            📤 Iniciar Upload em Lote
          </button>
          <button id="clear-files-btn" class="btn">
            🗑️ Limpar Seleção
          </button>
        </div>

        <!-- Progress Section -->
        <div id="upload-progress" class="progress-section hidden">
          <h4>📊 Progresso do Upload</h4>
          <div class="progress-bar">
            <div id="progress-fill" class="progress-fill"></div>
          </div>
          <div id="progress-info" class="progress-info">
            <span id="progress-text">Preparando...</span>
            <span id="progress-speed"></span>
          </div>
          <div id="upload-results" class="upload-results"></div>
        </div>
      </div>
    </div>

    <!-- Seção de Monitoramento -->
    <div class="card">
      <h3>📈 Estatísticas</h3>
      <div class="stats-grid">
        <div class="stat-card">
          <div class="stat-number" id="total-documents">0</div>
          <div class="stat-label">Total de Documentos</div>
        </div>
        <div class="stat-card">
          <div class="stat-number" id="total-size">0 MB</div>
          <div class="stat-label">Espaço Utilizado</div>
        </div>
        <div class="stat-card">
          <div class="stat-number" id="employees-with-docs">0</div>
          <div class="stat-label">Funcionários com Docs</div>
        </div>
        <div class="stat-card">
          <div class="stat-number" id="pending-uploads">0</div>
          <div class="stat-label">Uploads Pendentes</div>
        </div>
      </div>

      <div class="mt2">
        <h4>🔍 Busca Rápida</h4>
        <input id="doc-search" class="input" placeholder="Buscar por nome do funcionário ou documento...">
        <div id="search-results" class="search-results mt1"></div>
      </div>

      <div class="mt2">
        <h4>🏷️ Filtros</h4>
        <div class="filter-group">
          <select id="filter-type" class="input" style="width: 48%; margin-right: 4%;">
            <option value="">Todos os tipos</option>
            <option value="RG">RG</option>
            <option value="CPF">CPF</option>
            <option value="CONTRATO">Contrato</option>
            <option value="DIPLOMA">Diploma</option>
            <option value="CERTIFICADO">Certificado</option>
            <option value="PRONTUARIO">Prontuário</option>
            <option value="EXAME">Exame Médico</option>
            <option value="OUTROS">Outros</option>
          </select>
          <select id="filter-status" class="input" style="width: 48%;">
            <option value="">Todos os status</option>
            <option value="valid">Válidos</option>
            <option value="expired">Expirados</option>
            <option value="expiring">Expirando em 30 dias</option>
          </select>
        </div>
      </div>
    </div>
  </div>

  <!-- Seção de Listagem -->
  <div class="card mt2">
    <div class="card-header">
      <h3>📋 Documentos Recentes</h3>
      <div class="toolbar">
        <button id="export-docs" class="btn">📥 Exportar Lista</button>
        <button id="bulk-delete" class="btn danger">🗑️ Exclusão em Lote</button>
        <button id="refresh-docs" class="btn">🔄 Atualizar</button>
      </div>
    </div>

    <div class="table-container">
      <table class="table">
        <thead>
          <tr>
            <th><input type="checkbox" id="select-all-docs"></th>
            <th>Funcionário</th>
            <th>Documento</th>
            <th>Tipo</th>
            <th>Tamanho</th>
            <th>Upload</th>
            <th>Status</th>
            <th>Ações</th>
          </tr>
        </thead>
        <tbody id="bulk-docs-list">
          <!-- Documentos serão carregados aqui -->
        </tbody>
      </table>
    </div>

    <div class="pagination">
      <button id="prev-page" class="btn">← Anterior</button>
      <span id="page-info">Página 1 de 1</span>
      <button id="next-page" class="btn">Próximo →</button>
    </div>
  </div>

  <!-- Seção de Importação -->
  <div class="card mt2">
    <h3>📂 Importação de Diretório</h3>
    <p>Para volumes muito grandes (400GB+), use a ferramenta de linha de comando:</p>
    <div class="code-block">
      <code>
        # 1. Organize os arquivos em pastas por funcionário<br>
        documentos/<br>
        ├── EMP001/<br>
        │   ├── contrato.pdf<br>
        │   └── rg.pdf<br>
        ├── EMP002/<br>
        │   └── diploma.pdf<br>
        <br>
        # 2. Execute o script de importação<br>
        node backend/bulk-import.js ./documentos
      </code>
    </div>
    <button id="start-cli-import" class="btn ok mt1">🚀 Iniciar Importação CLI</button>
  </div>
</div>

<style>
.file-drop-zone {
  border: 2px dashed #ccc;
  border-radius: 8px;
  padding: 2rem;
  text-align: center;
  background: #fafafa;
  transition: all 0.3s ease;
  cursor: pointer;
}

.file-drop-zone.drag-over {
  border-color: #007acc;
  background: #e8f4fd;
}

.file-drop-zone.has-files {
  border-color: #28a745;
  background: #f0f8f0;
}

.link-button {
  background: none;
  border: none;
  color: #007acc;
  text-decoration: underline;
  cursor: pointer;
}

.file-preview {
  max-height: 200px;
  overflow-y: auto;
  text-align: left;
  margin-top: 1rem;
}

.file-item {
  display: flex;
  justify-content: space-between;
  align-items: center;
  padding: 0.5rem;
  border-bottom: 1px solid #eee;
  font-size: 0.9rem;
}

.file-item:last-child {
  border-bottom: none;
}

.file-size {
  color: #666;
  font-size: 0.8rem;
}

.file-remove {
  background: #ff4444;
  color: white;
  border: none;
  border-radius: 50%;
  width: 20px;
  height: 20px;
  font-size: 12px;
  cursor: pointer;
}

.progress-section {
  margin-top: 2rem;
  padding: 1rem;
  background: #f8f9fa;
  border-radius: 8px;
}

.progress-bar {
  width: 100%;
  height: 20px;
  background: #e9ecef;
  border-radius: 10px;
  overflow: hidden;
  margin: 1rem 0;
}

.progress-fill {
  height: 100%;
  background: linear-gradient(90deg, #28a745, #20c997);
  transition: width 0.3s ease;
  width: 0%;
}

.progress-info {
  display: flex;
  justify-content: space-between;
  font-size: 0.9rem;
  color: #666;
}

.upload-results {
  margin-top: 1rem;
  font-size: 0.9rem;
}

.stats-grid {
  display: grid;
  grid-template-columns: repeat(2, 1fr);
  gap: 1rem;
  margin: 1rem 0;
}

.stat-card {
  background: #f8f9fa;
  padding: 1rem;
  border-radius: 8px;
  text-align: center;
}

.stat-number {
  font-size: 2rem;
  font-weight: bold;
  color: #007acc;
}

.stat-label {
  font-size: 0.9rem;
  color: #666;
  margin-top: 0.5rem;
}

.filter-group {
  display: flex;
  gap: 1rem;
}

.search-results {
  max-height: 200px;
  overflow-y: auto;
  background: white;
  border: 1px solid #ddd;
  border-radius: 4px;
}

.search-item {
  padding: 0.5rem;
  border-bottom: 1px solid #eee;
  cursor: pointer;
  transition: background 0.2s;
}

.search-item:hover {
  background: #f8f9fa;
}

.search-item:last-child {
  border-bottom: none;
}

.table-container {
  max-height: 500px;
  overflow-y: auto;
}

.pagination {
  display: flex;
  justify-content: space-between;
  align-items: center;
  margin-top: 1rem;
  padding: 1rem 0;
}

.code-block {
  background: #2d3748;
  color: #e2e8f0;
  padding: 1rem;
  border-radius: 8px;
  font-family: 'Courier New', monospace;
  font-size: 0.9rem;
  margin: 1rem 0;
  white-space: pre-line;
}
</style>
